/*! For license information please see 950.9ca11eb25dca4bc81bba.js.LICENSE.txt */
"use strict";(self.webpackChunkkaraoke_forever=self.webpackChunkkaraoke_forever||[]).push([[950],{19950:(e,i,t)=>{t.r(i),t.d(i,{default:()=>A});var r=t(23029),a=t(92901),n=t(56822),o=t(53954),s=t(85501),u=t(64467),d=t(5556),c=t.n(d),h=t(96540),l=t(4428),p=t.n(l),v=t(18182),f=t(33795);function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}var y=function(e){function i(){var e,t,a,s;(0,r.A)(this,i);for(var d=arguments.length,c=new Array(d),l=0;l<d;l++)c[l]=arguments[l];return t=this,a=i,s=[].concat(c),a=(0,o.A)(a),e=(0,n.A)(t,m()?Reflect.construct(a,s||[],(0,o.A)(t).constructor):a.apply(t,s)),(0,u.A)(e,"audioGainNode",null),(0,u.A)(e,"canvas",h.createRef()),(0,u.A)(e,"frameId",null),(0,u.A)(e,"updateAudioSource",function(){e.audioGainNode=e.props.audioSourceNode.context.createGain(),e.props.audioSourceNode.connect(e.audioGainNode),e.visualizer.connectAudio(e.audioGainNode)}),(0,u.A)(e,"updatePlaying",function(){e.props.isPlaying&&!e.frameId?e.renderVisualizerFrame():(cancelAnimationFrame(e.frameId),e.frameId=null)}),(0,u.A)(e,"renderVisualizerFrame",function(){e.frameId=requestAnimationFrame(e.renderVisualizerFrame),e.visualizer.render()}),e}return(0,s.A)(i,e),(0,a.A)(i,[{key:"componentDidMount",value:function(){try{this.visualizer=p().createVisualizer(this.props.audioSourceNode.context,this.canvas.current,{width:this.props.width,height:this.props.height}),this.visualizer.loadExtraImages(f.A)}catch(e){return void this.props.onError(e.message)}var e=v.A[this.props.presetKey];e&&this.visualizer.loadPreset(e,0),this.updateAudioSource(),this.updatePlaying()}},{key:"componentDidUpdate",value:function(e,i){var t=this.props;t.audioSourceNode!==e.audioSourceNode&&this.updateAudioSource(),t.isPlaying!==e.isPlaying&&this.updatePlaying(),t.width===e.width&&t.height===e.height||this.visualizer.setRendererSize(t.width,t.height),t.presetKey!==e.presetKey&&this.visualizer.loadPreset(v.A[t.presetKey],1),this.audioGainNode&&t.sensitivity!==e.sensitivity&&this.audioGainNode.gain.setValueAtTime(t.sensitivity,this.audioGainNode.context.currentTime)}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.frameId)}},{key:"render",value:function(){var e=this.props,i=e.width,t=e.height;return h.createElement("div",{style:{width:i,height:t},className:"KkjTCNFeyJblwTH4ZFFo"},h.createElement("canvas",{width:i,height:t,ref:this.canvas}))}}])}(h.Component);(0,u.A)(y,"propTypes",{audioSourceNode:c().object.isRequired,isPlaying:c().bool.isRequired,onError:c().func.isRequired,presetKey:c().string.isRequired,sensitivity:c().number.isRequired,width:c().number.isRequired,height:c().number.isRequired});const A=y}}]);